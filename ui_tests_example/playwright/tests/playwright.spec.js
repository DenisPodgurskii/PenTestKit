import { test, expect } from '../fixtures/fixtures.ts';


test('test', async ({ page }) => {


    await page.goto('https://demo.testfire.net/');

    await page.waitForTimeout(2000);
    await page.evaluate(async () => {
        window.postMessage({ 'ptk_rattacker': 'start' });
    });
    await page.waitForTimeout(1000);


    await page.getByRole('link', { name: 'Sign In' }).click();
    await page.locator('#uid').click();
    await page.locator('#uid').fill('admin');
    await page.locator('#uid').press('Tab');
    await page.locator('#passw').fill('admin');
    await page.getByRole('button', { name: 'Login' }).click();
    await page.getByRole('link', { name: 'Transfer Funds' }).click();
    await page.locator('#toAccount').selectOption('800001');
    await page.locator('#transferAmount').click();
    await page.locator('#transferAmount').fill('1');
    await page.getByRole('button', { name: 'Transfer Money' }).click();

    await page.evaluate(async () => {
        window.postMessage({ 'ptk_rattacker': 'stop' });
    });
    await page.waitForTimeout(3000);
    console.log(await page.locator('#ptk_rattacker_result', { timeout: 10000 }).textContent())

    await page.waitForTimeout(15000);
});